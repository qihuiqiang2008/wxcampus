{
  "name": "xss",
  "main": "./lib/index.js",
  "version": "0.0.9",
  "description": "XSS攻击代码过滤 Remove XSS attack vectors from user-supplied HTML",
  "author": {
    "name": "leizongmin",
    "email": "leizongmin@gmail.com",
    "url": "http://ucdok.com"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/leizongmin/js-xss.git"
  },
  "engines": {
    "node": ">= 0.6.0"
  },
  "devDependencies": {
    "mocha": ">= 1.2"
  },
  "scripts": {
    "test": "mocha -t 5000"
  },
  "readme": "[![Build Status](https://secure.travis-ci.org/leizongmin/js-xss.png?branch=master)](http://travis-ci.org/leizongmin/js-xss)\n\n过滤XSS攻击\n======\n\n![xss](https://nodei.co/npm/xss.png?downloads=true&stars=true)\n\n\n## 参考资料\n\n+ [XSS与字符编码的那些事儿 ---科普文](http://drops.wooyun.org/tips/689)\n+ [腾讯实例教程：那些年我们一起学XSS](http://www.wooyun.org/whitehats/%E5%BF%83%E4%BC%A4%E7%9A%84%E7%98%A6%E5%AD%90)\n+ [XSS Filter Evasion Cheat Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)\n+ [Data URI scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)\n+ [XSS with Data URI Scheme](http://hi.baidu.com/badzzzz/item/bdbafe83144619c199255f7b)\n\n\n## 安装\n\n**npm install xss**\n\n\n## 原理\n\n通过标签白名单及属性白名单来过滤HTML标签，同时对包含特殊字符的属性值进行处理。默认配置可过滤大多数的XSS攻击代码，可根据实际应用场景来定制白名单及过滤方法。\n\n\n## 使用方法\n\n### 载入模块\n\n```javascript\nvar xss = require('xss');\n```\n\n### 使用默认的配置\n\n```javascript\nvar html = xss('<script>alert(\"xss\");</script>');\nconsole.log(html);\n```\n\n### 修改默认配置\n\n```javascript\n// 添加或更新白名单中的标签 标签名（小写） = ['允许的属性列表（小写）']\nxss.whiteList['p'] = ['class', 'style'];\n// 删除默认的白名单标签\ndelete xss.whiteList['div'];\n\n// 自定义处理属性值函数\nxss.onTagAttr = function (tag, attr, vaule) {\n  // tag：当前标签名（小写）\n  // attr：当前属性名（小写）\n  // value：当前属性值\n  // 返回新的属性值，如果想使用默认的处理方式，不返回任何值即可\n  // 比如把属性值中的双引号替换为&amp;quote;：return value.replace(/\"/g, '&amp;quote;');\n  // 以下为默认的处理代码：\n  if (attr === 'href' || attr === 'src') {\n    if (/\\/\\*|\\*\\//mg.test(value)) {\n      return '#';\n    }\n    if (/^[\\s\"'`]*((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/ig.test(value)) {\n      return '#';\n    }\n  } else if (attr === 'style') {\n    if (/\\/\\*|\\*\\//mg.test(value)) {\n      return '#';\n    }\n    if (/((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/ig.test(value)) {\n      return '';\n    }\n  }\n};\n\n// 自定义处理不在白名单中的标签\nxss.onIgnoreTag = function (tag, html) {\n  // tag：当前标签名（小写），如：a\n  // html：当前标签的HTML代码，如：<a href=\"ooxx\">\n  // 返回新的标签HTML代码，如果想使用默认的处理方式，不返回任何值即可\n  // 比如将标签替换为[removed]：return '[removed]';\n  // 以下为默认的处理代码：\n  return html.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n```\n\n### 使用临时配置\n\n```javascript\nvar options = {\n  whiteList:   {},        // 若不指定则使用默认配置，可参考xss.whiteList\n  onTagAttr:   function () {},  // 若不指定则使用默认配置，可参考xss.onTagAttr\n  onIgnoreTag: function () {}   // 若不指定则使用默认配置，可参考xss.onIgnoreTag\n};\nvar html = xss('<script>alert(\"xss\");</script>', options);\nconsole.log(html);\n```\n\n### 在浏览器端使用\n\n```\n<script src=\"https://raw.github.com/leizongmin/js-xss/master/build/xss.js\"></script>\n<script>\n// 使用函数名 filterXSS，用法一样\nvar html = filterXSS('<script>alert(\"xss\");</scr' + 'ipt>');\nalert(html);\n</script>\n```\n\n\n## 其他应用\n\n\n## 测试\n\n### 单元测试\n\n在源码目录执行命令： **npm test**\n\n### 在线测试\n\n在源码目录执行命令： **node lib/cli.js** ，可在命令行中输入HTML代码，并看到过滤后的代码\n\n\n## 性能\n\n解析速度为 **5.81MB/s** ，而另外一个 **validator** 模块的xss()函数速度仅为 **2.48MB/s** 。\n\n测试代码参考 **benchmark** 目录\n\n\n## 授权协议\n\n基于MIT协议发布：\n\n```\nCopyright (c) 2012-2014 Zongmin Lei(雷宗民) <leizongmin@gmail.com>\nhttp://ucdok.com\n\nThe MIT License\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n```",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/leizongmin/js-xss/issues"
  },
  "homepage": "https://github.com/leizongmin/js-xss",
  "_id": "xss@0.0.9",
  "_from": "xss@~0.0.9"
}
